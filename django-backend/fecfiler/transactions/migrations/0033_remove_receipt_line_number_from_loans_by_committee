# Generated by Django 4.1.3 on 2023-06-05 20:15

from django.db import migrations


def remove_receipt_line_number(apps, schema_editor):  # noqa
    Transaction = apps.get_model("transactions", "Transaction")  # noqa
    for transaction in Transaction.objects.filter(
        transaction_type_identifier="LOAN_BY_COMMITTEE"
    ):
        del transaction.schedule_c.receipt_line_number
        transaction.save()


def add_receipt_line_number(apps, schema_editor):  # noqa
    Transaction = apps.get_model("transactions", "Transaction")  # noqa
    for transaction in Transaction.objects.filter(
        transaction_type_identifier="LOAN_BY_COMMITTEE"
    ):
        transaction.schedule_c.receipt_line_number = "27"
        transaction.save()


class Migration(migrations.Migration):
    dependencies = [
        ("transactions", "0032_schedulea_reattribution_redesignation_tag_and_more"),
    ]

    operations = [
        migrations.RunPython(
            remove_receipt_line_number, reverse_code=add_receipt_line_number
        )
    ]
